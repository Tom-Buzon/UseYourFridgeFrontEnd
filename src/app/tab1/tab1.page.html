<!-- src/app/tab1/tab1.page.html -->

<ion-header>
  <ion-toolbar>
    <ion-title>{{ 'HOME' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Section 1: Calendrier -->
  <div class="section">
    <h2>{{ 'CALENDAR' | translate }}</h2>
    <!-- Placeholder pour le calendrier -->
    <ion-card>
      <ion-card-content>
        <!-- Vous pouvez remplacer ce placeholder par un composant de calendrier -->
        <p>{{ 'CALENDAR_PLACEHOLDER' | translate }}</p>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Section 2: Vos listes de courses -->
  <div class="section">
    <h2>{{ 'YOUR_SHOPPING_LISTS' | translate }}</h2>
    <ion-list>
      <ion-item-sliding *ngFor="let list of shoppingLists; let i = index">
        <ion-item (click)="openShoppingList(list)">
          <ion-label>{{ list.name }}</ion-label>
        </ion-item>
        <ion-item-options side="end">
          <ion-item-option color="danger" (click)="deleteShoppingList(i)">
            <ion-icon slot="icon-only" name="trash"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
    <ion-button expand="block" (click)="createShoppingList()">
      {{ 'CREATE_NEW_LIST' | translate }}
    </ion-button>
  </div>

  <!-- Section 3: Vos menus disponibles -->
  <div class="section">
    <h2>{{ 'AVAILABLE_MENUS' | translate }}</h2>
    <ion-list>
      <ion-card *ngFor="let recette of displayedRecettes" (click)="onRecetteClick(recette)">
        <img [src]="recette.images" (error)="onImageError($event)" />
        <ion-card-header>
          <ion-card-title>{{ recette.title }}</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p>{{ recette.description }}</p>
          <p>{{ 'INGREDIENTS_AVAILABLE' | translate }}: {{ recette.availableIngredients }}/{{ recette.totalIngredients }}</p>
        </ion-card-content>
      </ion-card>
    </ion-list>

    <ion-infinite-scroll threshold="100px" (ionInfinite)="loadMoreRecettes($event)">
      <ion-infinite-scroll-content
        loadingSpinner="bubbles"
        loadingText="{{ 'LOADING_MORE_RECIPES' | translate }}"
      ></ion-infinite-scroll-content>
    </ion-infinite-scroll>

    <ion-item *ngIf="displayedRecettes.length === 0">
      {{ 'NO_RECIPES_AVAILABLE' | translate }}
    </ion-item>
  </div>
</ion-content>
